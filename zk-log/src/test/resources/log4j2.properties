# 一、日志格式说明 =========================================================
# 1、定义标准输出的日志格式(SYSTEM_OUT)
#       %level:表示日志级别，%-5level, 表示5个占位符; 即 DEBUG，INFO，WARN，ERROR，FATAL
#		%m 消息体(即我们填的信息)
#		%p 优先级，即DEBUG，INFO，WARN，ERROR，FATAL
#		%r 自应用启动到输出该log信息耗费的毫秒数
#		%F 日志消息产生时所在的文件名称
#		%c 所在类的全名
#		%t 产生该日志事件的线程名(方法名)
#		%n 一个回车换行符，Windows平台为“rn”，Unix平台为“n”
#		%d 日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy MMM dd HH:mm:ss,SSS}，输出类似：2002年10月18日 22：10：28，921
#		%l 日志事件的发生位置，包括类目名、发生的线程，以及在代码中的行数。举例：Testlog4.main(TestLog4.java:10)
#		%L 行号
#		%x 和当前线程相关联的NDC(嵌套诊断环境),像java servlets多客户多线程的应用中
#		%% 一个"%"字符

#	可以在%与模式字符之间加上修饰符来控制其最小宽度、最大宽度、和文本的对齐方式。如：
#		%5c: 输出category名称，最小宽度是5，category<5，默认的情况下右对齐
#		%-5c:输出category名称，最小宽度是5，category<5，"-"号指定左对齐,会有空格
#		%.5c:输出category名称，最大宽度是5，category>5，就会将左边多出的字符截掉，<5不会有空格
#		%20.30c:category名称<20补空格，并且右对齐，>30字符，就从左边交远销出的字符截掉
#
# 2、Log4j提供的 appender 有很多种，可以去官网查：https://www.docs4dev.com/docs/zh/log4j2/2.x/all/manual-appenders.html#RandomAccessFileAppender

# 二、日志属性配置 =========================================================
#property.zk.layout.pattern = [zk:%-5p]->[%d{yyyy-MM-dd HH:mm:ss}]%c{3} [n:%L] %m%n
property.zk.layout.pattern = [zk01:%-5level]->[%d{yyyy-MM-dd HH:mm:ss}][%t]%c [n:%L] %m%n
property.zk.layout.basePath = target/logs/

# 三、日志一般配置 =========================================================
status=Error
# 配置 filters，会作用到 is...Enabled() 中，可以配置多个。
filter.f1.type = ThresholdFilter
filter.f1.level = INFO
filter.f2.type = ThresholdFilter
filter.f2.level = INFO

# 四、日志输出目标配置 =========================================================
# ----- 控制台日志打印; Console; org.apache.log4j.ConsoleAppender   ThresholdFilter. DENY NEUTRAL ACCEPT 
appender.ConsoleLog.name = ConsoleLog
appender.ConsoleLog.type = Console
#appender.ConsoleLog.Target=System.out
appender.ConsoleLog.layout.type = PatternLayout
appender.ConsoleLog.layout.pattern = ${zk.layout.pattern}
# 日志级别拦截器，在日志输出目的中，只能配置一个
appender.ConsoleLog.filter.f.type = ThresholdFilter
appender.ConsoleLog.filter.f.level = INFO
appender.ConsoleLog.filter.f.onMatch = ACCEPT
appender.ConsoleLog.filter.f.onMismatch = DENY
#appender.ConsoleLog.filter.f.type = LevelRangeFilter
#appender.ConsoleLog.filter.f.minLevel = WARN
#appender.ConsoleLog.filter.f.maxLevel = INFO
#appender.ConsoleLog.filter.f.onMatch = ACCEPT
#appender.ConsoleLog.filter.f.onMismatch = DENY
# ----- 文件大小到达指定尺寸的时候产生一个新的文件; RollingFile; org.apache.log4j.RollingFileAppender  ${spring.application.name}
appender.RollingFileError.type=RollingFile
appender.RollingFileError.name=RollingFileErrorLog
appender.RollingFileError.filter.f.type = ThresholdFilter
appender.RollingFileError.filter.f.level = Error
appender.RollingFileInfo.filter.f.onMatch = ACCEPT
appender.RollingFileInfo.filter.f.onMismatch = DENY
appender.RollingFileError.fileName=${zk.layout.basePath}/error.log
appender.RollingFileError.filePattern=${zk.layout.basePath}/error.all.%d{yyyyMMddHH}.log
appender.RollingFileError.layout.type=PatternLayout
appender.RollingFileError.layout.pattern=${zk.layout.pattern}
appender.RollingFileError.policies.type=Policies
appender.RollingFileError.policies.time.type=TimeBasedTriggeringPolicy
appender.RollingFileError.policies.time.interval=2
appender.RollingFileError.policies.time.modulate=true
appender.RollingFileError.policies.size.type=SizeBasedTriggeringPolicy
appender.RollingFileError.policies.size.size=512MB
appender.RollingFileError.strategy.type=DefaultRolloverStrategy
appender.RollingFileError.strategy.max = 5
# ----- org.apache.log4j.RollingFileAppender
appender.RollingFileInfo.type=RollingFile
appender.RollingFileInfo.name=RollingFileInfoLog
appender.RollingFileInfo.filter.f.type = LevelRangeFilter
appender.RollingFileInfo.filter.f.minLevel = WARN
appender.RollingFileInfo.filter.f.maxLevel = INFO
appender.RollingFileInfo.filter.f.onMatch = ACCEPT
appender.RollingFileInfo.filter.f.onMismatch = DENY
appender.RollingFileInfo.fileName=${zk.layout.basePath}/info.log
appender.RollingFileInfo.filePattern=${zk.layout.basePath}/info.all.%d{yyyyMMddHH}.log
appender.RollingFileInfo.layout.type=PatternLayout
appender.RollingFileInfo.layout.pattern=${zk.layout.pattern}
appender.RollingFileInfo.policies.type=Policies
appender.RollingFileInfo.policies.time.type=TimeBasedTriggeringPolicy
appender.RollingFileInfo.policies.time.interval=2
appender.RollingFileInfo.policies.time.modulate=true
appender.RollingFileInfo.policies.size.type=SizeBasedTriggeringPolicy
appender.RollingFileInfo.policies.size.size=512MB
appender.RollingFileInfo.strategy.type=DefaultRolloverStrategy
appender.RollingFileInfo.strategy.max = 5
# ----- 每天一个日志文件; org.apache.log4j.DailyRollingFileAppender 不再支持

# 五、rootLogger 权日志记录器配置 =========================================================
# ConsoleLog, RollingFile
# rootLogger.level 默认 Error
rootLogger.level = ALL
rootLogger.appenderRef.consoleLog.ref = ConsoleLog
rootLogger.appenderRef.info.ref = RollingFileInfoLog
rootLogger.appenderRef.error.ref = RollingFileErrorLog

# 六、logger 日志记录器配置 =========================================================
# 指定包下的日志输出级别及输出文件
logger.zkLog.level = DEBUG
logger.zkLog.name = com.zk.log
logger.zkLog.additivity = false
logger.zkLog.appenderRef.out1.ref = ConsoleLog
logger.zkLog.appenderRef.out2.ref = RollingFileInfoLog
logger.zkLog.appenderRef.out3.ref = RollingFileErrorLog

# Spring Boot 2.1 以后，RequestMappingHandlerMapping 中 controller 中映射的日志的级别修改为了 TRACE 级别；
#logger.servletWebMvc.level = TRACE
#logger.servletWebMvc.name = org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping
#logger.reactiveWebFlux.level = TRACE
#logger.reactiveWebFlux.name = org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerMapping
#logger.xxx.name = org.springframework.web

# 七、其他日志配置说明 =========================================================
# ----------------------------------------------------------------------
# 日志级别优先级： OFF > FATAL > ERROR > WARN > INFO > DEBUG > TRACE > ALL
# ----------------------------------------------------------------------
# 一、@日志输出级别作用的优化级: 
#   appender.filter.level > filter.level > logger.level > rootLogger.level
# 二、@日志级别 is...Enabled()
#	filter.level > logger.level > rootLogger.level







