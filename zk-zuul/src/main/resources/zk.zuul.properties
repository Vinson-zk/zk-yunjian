
# =================== 配置 =================== 
#zk.path.admin=zk
zk.path.zuul=zuul
# 版本号
zk.zuul.version=v1.0
# 默认语言；注意这里不影响到 localeresolver 的默认语言
zk.path.defaultlocale=zh_cn

# 指定 jmx domain name。不加这个标识，在一个 main 函数中无法启动多个 spring boot application。有点像 web.xml 中的 webapprootkey
spring.jmx.defaultdomain=zkZuul
 
logging.level.org.springframework.web=trace

# 应用名称
spring.application.name=yunjian.zk.zuul
# 解决中文乱码；
spring.http.encoding.force=true

# 关闭自动 favicon；使用自定义
#spring.mvc.favicon.enabled=false

spring.jmx.defaultdomain=yunjian.zk.zuul

spring.main.allow-bean-definition-overriding=true
spring.main.allow-circular-references=true

# 文件上传，处理字符集
zk.mail.file.upload.multipartresolver.defaultencoding=utf-8
# 文件上传，最大上传大小，需要比邮件附件单个的文件大小配置值要大；50m=52428800
zk.mail.file.upload.multipartresolver.maxuploadsize=52428800
# 文件上传，最大处理内存大小； 1m=1048576
zk.mail.file.upload.multipartresolver.maxinmemorysize=10485760
# 文件上传，单个文件上传最大大小； 10m=10485760   50m=52428800
zk.mail.file.upload.multipartresolver.maxuploadsizeperfile=52428800

# =================== 静态内容 =================== 
## 请求 uri /mystatic/**, 只支持配置一个
#spring.mvc.static-path-pattern=/static/**
## 请求文件本地址
#spring.resources.static-locations=classpath:/static/,classpath:/eureka/
#spring.resources.static-locations=classpath:/static/,classpath:/static/eureka/
# whether to force the encoding to the configured charset on http requests and responses. 
# 解决静态文件中 中文乱码问题
# 解决中文乱码；
#spring.http.encoding.force=true

# =================== eureka 中心配置 client 配置 =================== 
# 主机名
eureka.instance.hostname=zkZuuleurekaclientapphost

# 是否 启用服务注册；false-不向服务中心注册；
eureka.client.enabled=true

# eureka 注册中心及获取服务配置信息的地址；默认 http://localhost:8761/eureka/ 
#eureka.client.service-url.defaultZone=http://localhost:10081/eureka/
#eureka.client.service-url.defaultZone=http://192.168.1.104:10081/eureka/
eureka.client.service-url.defaultZone=http://192.168.1.104:10081/eureka/

# =================== zuul 配置 =================== 
# *** 详细配置，查看 org.springframework.cloud.netflix.zuul.filters.zuulproperties 类
# 需要忽视的服务(被忽视的服务，需要通过路由映射才能被访问); 支持多个，逗号隔开：服务 service-id,服务 service-id；* 是所有服务;
# 为 * 时，将无法通服务名去访问
zuul.ignoredservices=*
# 解决http请求头为空的问题 (值为空就好了)
zuul.sensitiveheaders=
# 按请求路径忽视，被忽视的路径无法通过路由映射访问；
# zuul.ignoredpatterns=/**/nozuul

# 如果不配置，将默认使用 http://gateway:gateway_port/想要访问的eureka服务id的小写/** 
# 路由到：http://想要访问的eureka服务id的小写:该服务端口/**
# ----------- 

# spring cloud zuul 在路由请求时，并没有将最初的 host 信息设置正确，添加如下配置
zuul.add-host-header=true

# path 采用 ant path 匹配
# table ant wildcard characters
# wildcard	description	 
# ?			匹配任何单字符	 
# *			匹配0或者任意数量的字符	 
# **		匹配0或者更多的目录	 
# table 	example ant-style path patterns
#
# path					description	 
# /app/*.x				匹配(matches)所有在app路径下的.x文件	 
# /app/p?ttern			匹配(matches) /app/pattern 和 /app/pxttern,但是不包括/app/pttern	 
# /**/example			匹配(matches) /app/example, /app/foo/example, 和 /example	 
# /app/**/dir/file.		匹配(matches) /app/dir/file.jsp, /app/foo/dir/file.html,/app/foo/bar/dir/file.pdf, 和 /app/dir/file.java	 
# /**/*.jsp				匹配(matches)任何的.jsp 文件	 
# 
# zuul.routes.[xxx].path 中 xxx 可以随便写，在zuul上面唯一即可；当[xxx]的值 = service-id时，zuul.routes.[xxx].serviceid 可不写。
zuul.routes.apisys.path=/apisys/**
zuul.routes.apisys.serviceid=yunjian.zk.system

zuul.routes.apiwechat.path=/apiwechat/**
zuul.routes.apiwechat.serviceid=yunjian.zk.wechat

zuul.routes.apidevtool.path=/apidevtool/**
zuul.routes.apidevtool.serviceid=yunjian.zk.dev.tool

zuul.routes.apimail.path=/apimail/**
zuul.routes.apimail.serviceid=yunjian.zk.mail

zuul.routes.apifile.path=/apifile/**
zuul.routes.apifile.serviceid=yunjian.zk.file

#zuul.routes.apigfgeneral.path=/apigfgeneral/**
#zuul.routes.apigfgeneral.serviceid=zhgxfz.general

# 路由时，不向第三方传递请求头
#ignored-headers: accept-language
# 路由时，不向第三方传递cookie 
#sensitive-headers: cookie  
# =================== zuul 溶断、限流、超时 配置 ===================
# 限流配置
zuul.ribbon.eagerload.enabled=true
zuul.ratelimit.defaultpolicy.limit=3
zuul.ratelimit.defaultpolicy.refreshinterval=60
zuul.ratelimit.defaultpolicy.type=origin
zuul.host.connecttimeoutmillis=10000
zuul.host.sockettimeoutmillis=10000
zuul.ratelimit.enabled=true
#
# timeoutinmilliseconds值要比后面几个值要大，而且不能使用timeout-in-milliseconds 
hystrix.command.default.execution.isolation.thread.timeoutinmilliseconds=15000
# 通信超时时间(ms)
ribbon.readtimeout=10000
# 连接超时时间(ms)
ribbon.connecttimeout=10000
# 是否对所有操作重试
ribbon.oktoretryonalloperations=true
## 同一服务不同实例的重试次数
ribbon.maxautoretriesnextserver=2
## 同一实例的重试次数
ribbon.maxautoretries=1

## 连接所用的时间，适用于网络状况正常的情况下，两端连接所需要的时间
feign.client.config.default.connecttimeout=10000
##指建立连接后从服务端读取到可用资源所用的时间
feign.client.config.default.readtimeout=15000

### ==============================================
# 注：
# 错误一：org.springframework.cloud.netflix.zuul.filters.post.senderrorfilter.findzuulexception(senderrorfilter.java:118)
# 解决，配置: ribbon.readtimeout=10000




